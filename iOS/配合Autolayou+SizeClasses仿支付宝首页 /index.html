<!DOCTYPE html><html class="appearance-auto" lang="zh-CN"><head><meta charset="UTF-8"><title>配合Autolayou+SizeClasses仿支付宝首页</title><meta name="description"><meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no, initial-scale=1"><link rel="icon" href="/images/favicon.png"><link rel="stylesheet" href="/style/common/bulma.css"><link rel="stylesheet" href="/style/base.css"><link rel="stylesheet" href="/style/common/helper.css"><script src="/js/common.js"></script><link rel="stylesheet" href="/style/post.css"><link rel="stylesheet" href="/style/themes/highlight-theme-light.css"><script src="/js/highlight.pack.js"></script><meta name="generator" content="Hexo 5.3.0"></head><body class="is-flex is-flex-direction-column"><header class="is-flex header-widget is-flex-shrink-0 is-align-items-center is-justify-content-space-between is-hidden-mobile"><section class="is-hidden-mobile is-flex-shrink-0"><h2><a href="/">loannes's blog</a></h2></section><h3 class="is-hidden-mobile is-family-serif is-full-height is-flex is-align-items-center is-flex-shrink-0"><div class="is-full-height" id="postTopic"><p class="is-full-height is-flex-shrink-0 is-flex is-align-items-center is-justify-content-center">配合Autolayou+SizeClasses仿支付宝首页</p><p class="is-full-height is-flex-shrink-0 is-flex is-align-items-center is-justify-content-center">点击返回顶部</p></div></h3><aside class="is-flex-shrink-0"><h3 class="is-inline-block"><a href="/">首页</a></h3><h3 class="is-inline-block"><a href="/about">关于</a></h3><h3 class="is-inline-block"><a href="/archives">归档</a></h3></aside></header><header class="is-flex header-widget is-flex-shrink-0 is-align-items-center is-justify-content-center is-hidden-tablet"><h3 class="is-inline-block"><a href="/">首页</a></h3><h3 class="is-inline-block"><a href="/about">关于</a></h3><h3 class="is-inline-block"><a href="/archives">归档</a></h3></header><main><main class="container is-max-widescreen content section post-page pt-4 px-4"><div class="columns is-flex-desktop is-justify-content-center is-flex-direction-row-reverse"><div class="column is-3 is-hidden-mobile"><ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%87%86%E5%A4%87"><span class="toc-text">准备</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%9E%E7%8E%B0"><span class="toc-text">实现</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AC%AC%E4%B8%80%E9%83%A8%E5%88%86"><span class="toc-text">第一部分</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AC%AC%E4%BA%8C%E9%83%A8%E5%88%86"><span class="toc-text">第二部分</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AC%AC%E4%B8%89%E9%83%A8%E5%88%86"><span class="toc-text">第三部分</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AC%AC%E5%9B%9B%E9%83%A8%E5%88%86"><span class="toc-text">第四部分</span></a></li></ol></div><div class="column is-9"><header class="my-4"><a href="/tags/Size%20Classes"><i class="tag post-item-tag">Size Classes</i></a><a href="/tags/Autolayout"><i class="tag post-item-tag">Autolayout</i></a></header><h1 class="mt-0 mb-1 is-family-serif" id="postTitle">配合Autolayou+SizeClasses仿支付宝首页</h1><time class="has-text-grey" datetime="2015-04-05T03:12:19.000Z">2015-04-05</time><article class="mt-2 post-content"><p>=============================</p>
<h3 id="准备"><a href="#准备" class="headerlink" title="准备"></a>准备</h3><hr>
<p>在开始之前先简单分析下界面。</p>
<p>首页这个界面总共分为四大部分，最上面是扫一扫和付款码两个按钮，接下来一组按钮，再下面是一个轮播视图，最后是另外一组按钮。</p>
<p>其中有2个难点<br>1.配合Autolayout实现四等分按钮<br>2.Scrollview动态修改内部尺寸</p>
<p>这次主要讲的是Autolayout+SizeClasses，能够通过这次练习基本掌握Autolayout配合基本常用控件的特性，所以其他的地方不会讲的很细，而且素材是直接从支付宝8.6.3的ipa中拿的，所以和支付宝还是有些区别的。</p>
<h2 id="实现"><a href="#实现" class="headerlink" title="实现"></a>实现</h2><hr>
<h3 id="第一部分"><a href="#第一部分" class="headerlink" title="第一部分"></a>第一部分</h3><p>第一部分其实很简单，其实就是各自的横向坐标位于界面的左半边和右半边的中心,纵向坐标则是与背景底部呈固定距离。</p>
<p>我选择的是把第一部分的背景分割成2个部分，左半边和右半边，这样方便2个按钮的居中。\</p>
<p>在Storyboad强大的辅助线的帮助下，这个部分没有任何难处。</p>
<h3 id="第二部分"><a href="#第二部分" class="headerlink" title="第二部分"></a>第二部分</h3><p>在做第二部分之前，可以先看一下<a target="_blank" rel="noopener" href="http://fuer4869.github.io/2015/09/27/%E4%BD%BF%E7%94%A8Autolayout%E5%AE%9E%E7%8E%B0%E5%8A%A8%E6%80%81%E9%AB%98%E5%BA%A6%E7%9A%84ScrollView/">这篇文章</a>,因为这里要涉及到ScrollView的内部自适应问题，这里就不再赘述了。</p>
<p>这里先来讲下四等分大致实现思路，要实现四等分首先要满足以下几个条件，</p>
<ol>
<li> 四个按钮顶部对齐</li>
<li> 四个按钮之间的间距相等</li>
<li> 四个按钮相互之间必须宽和高相等</li>
</ol>
<p>稍微讲一下这个按钮中的一些细节，因为这个本身是可点击的，一般情况是一个view里面放一个和view同样大小的透明button，这里因为还没涉及到点击，所以我没把按钮放进去，主要看一下icon和小标题是如何约束的。其实UIImageView和UILabel的约束都有一些特性，因为它本身是有内容的，UIImageView本身有图片在内，UILabel也有文字填充进去了，所以它的高度和宽度已经计算好了不用我们再另外进行约束，我们只要确定它的位置就可以了。所以我指给了这个icon添加了2条约束，横向居中对齐和底部与下面的”余额宝”之间保持8px的间距，”余额宝”的约束同上，底部与view的底部的间距为8。因为考虑到适配其他设备，所以我为view加了个比例，这样view的高度就不用做固定值了。</p>
<p>这里我为了方便复制，为第一排单独做了个大view，然后把4个刚刚制作好的view放在这个大view中。链接好其他约束之后大致的效果就出来了。大view的宽度跟设备宽度一致，撑满整个屏幕就行。但是它的高度不能做成固定高度，否则适配到小尺寸屏幕上会变的很丑，所以我们要把view做成自适应内部高度。做法很简单，只要让内部的按钮顶部和底部与view的距离保持固定就可以了。</p>
<p>view的约束</p>
<p>第二部分完成效果图：</p>
<h3 id="第三部分"><a href="#第三部分" class="headerlink" title="第三部分"></a>第三部分</h3><p>第三部分是一个滚动轮播视图，这个部分光靠Storyboard无法实现，还得需要代码，不在本文讨论范围内，就先不做了。其实要做的话也很简单，只要在Storyboard中放一个ScrollView，然后在实现文件当中去创建图片放入scrollview中，做好约束就可以了。轮播效果只要加个定时器，让ScrollView自动滚动。</p>
<h3 id="第四部分"><a href="#第四部分" class="headerlink" title="第四部分"></a>第四部分</h3><p>第四部分UI效果和第二部分一样，值得注意的是这里因为是本页面的最后一个元素，也就是能确定整个ScrollView内容大小的关键。所以在做约束的时候要让ScrollView中的view和这个部分的底部保持距离，这样才能确定ScrollView的内容。</p>
<p>###总结<br>对于初学Autolayout的同学来说，刚开始做四等分的时候可能会有点乱，看似简单其实里面的逻辑关系还是有点复杂的，既要让4个按钮保持等宽高，并且还要考虑到其他设备。所以个人建议可以如果觉得到后面约束会被自己弄乱的话可以按照这里的方法，把这些空间分组一组一组来做约束，这样会轻松很多。在这次练习当中我又再一次体会到了自适应ScrollView在Autolayout中的强大之处。</p>
<p>PS:在设计界面的时候会遇到整个画板高度不够的情况，我这里用了很笨的方法，直接硬塞然后调整右边的坐标来做约束的，如果有更好的建议欢迎指出！</p>
<p><a target="_blank" rel="noopener" href="https://github.com/fuer4869/AutoLayoutZFB">项目下载地址</a></p>
</article><section class="jump-container is-flex is-justify-content-space-between my-6"><!-- em is empty placeholder--><a class="button is-default" href="/ios/%E7%94%A8xctool%E6%89%93%E5%8C%85ipa%E6%96%87%E4%BB%B6%E8%87%AA%E5%8A%A8%E4%B8%8A%E4%BC%A0%E5%88%B0fir%20/" title="用xctool打包ipa文件自动上传到fir"><i class="iconfont icon-prev mr-2 has-text-grey"></i><span class="has-text-weight-semibold">上一页: 用xctool打包ipa文件自动上传到fir</span></a><a class="button is-default" href="/ios/%E8%AE%B2%E8%AE%B2iOS%E7%9A%84URL%E5%8A%A0%E8%BD%BD%E7%B3%BB%E7%BB%9F%20/" title="讲讲iOS的URL加载系统"><span class="has-text-weight-semibold">下一页: 讲讲iOS的URL加载系统</span><i class="iconfont icon-next ml-2 has-text-grey"></i></a></section><article class="mt-6 comment-container"><script async repo="fuer4869/fuer4869.github.io" src="https://utteranc.es/client.js" issue-term="pathname" theme="preferred-color-scheme"></script></article></div></div></main></main><footer class="is-flex is-flex-direction-column is-align-items-center is-flex-shrink-0 is-family-serif"><section class="sns-container"><a title="twitter" target="_blank" rel="noopener nofollow" href="//twitter.com//"><i class="iconfont icon-twitter"></i></a><!-- Github--><a title="github" target="_blank" rel="noopener nofollow" href="//github.com/fuer4869"><i class="iconfont icon-github"></i></a><!-- Ins--><a title="instagram" target="_blank" rel="noopener nofollow" href="//www.instagram.com//"><i class="iconfont icon-ins"></i></a><!-- RSS--><!-- 知乎--><!-- 领英--><!-- 脸书--><a title="facebook" target="_blank" rel="noopener nofollow" href="//www.facebook.com//"><i class="iconfont icon-tian7_facebook"></i></a></section><p><span>Copyright ©</span><span> loannes 2021</span></p><div class="is-flex is-justify-content-center is-flex-wrap-wrap"><p>Powered by Hexo &verbar;&nbsp;</p><p class="is-flex is-justify-content-center"><a title="Hexo theme author" target="_blank" rel="noopener" href="//github.com/haojen">Theme by Haojen&nbsp;</a></p><div style="margin-top: 2px"><a class="github-button" title="github-button" target="_blank" rel="noopener" href="https://github.com/haojen/hexo-theme-Claudia" data-color-scheme="no-preference: light; light: light; dark: dark;" data-show-count="true"></a></div></div></footer><script async defer src="https://buttons.github.io/buttons.js"></script><script src="/js/post.js"></script></body></html>