<!DOCTYPE html><html class="appearance-auto" lang="zh-CN"><head><meta charset="UTF-8"><title>Python数据分析之Numpy-ndarray及数据类型</title><meta name="description"><meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no, initial-scale=1"><link rel="icon" href="/images/favicon.png"><link rel="stylesheet" href="/style/common/bulma.css"><link rel="stylesheet" href="/style/base.css"><link rel="stylesheet" href="/style/common/helper.css"><script src="/js/common.js"></script><link rel="stylesheet" href="/style/post.css"><link rel="stylesheet" href="/style/themes/highlight-theme-light.css"><script src="/js/highlight.pack.js"></script><meta name="generator" content="Hexo 5.3.0"></head><body class="is-flex is-flex-direction-column"><header class="is-flex header-widget is-flex-shrink-0 is-align-items-center is-justify-content-space-between is-hidden-mobile"><section class="is-hidden-mobile is-flex-shrink-0"><h2><a href="/">loannes's blog</a></h2></section><h3 class="is-hidden-mobile is-family-serif is-full-height is-flex is-align-items-center is-flex-shrink-0"><div class="is-full-height" id="postTopic"><p class="is-full-height is-flex-shrink-0 is-flex is-align-items-center is-justify-content-center">Python数据分析之Numpy-ndarray及数据类型</p><p class="is-full-height is-flex-shrink-0 is-flex is-align-items-center is-justify-content-center">点击返回顶部</p></div></h3><aside class="is-flex-shrink-0"><h3 class="is-inline-block"><a href="/">首页</a></h3><h3 class="is-inline-block"><a href="/about">关于</a></h3><h3 class="is-inline-block"><a href="/archives">归档</a></h3></aside></header><header class="is-flex header-widget is-flex-shrink-0 is-align-items-center is-justify-content-center is-hidden-tablet"><h3 class="is-inline-block"><a href="/">首页</a></h3><h3 class="is-inline-block"><a href="/about">关于</a></h3><h3 class="is-inline-block"><a href="/archives">归档</a></h3></header><main><main class="container is-max-widescreen content section post-page pt-4 px-4"><div class="columns is-flex-desktop is-justify-content-center is-flex-direction-row-reverse"><div class="column is-3 is-hidden-mobile"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#NumPy%E7%9A%84ndarray"><span class="toc-text">NumPy的ndarray</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%B8%B8%E7%94%A8%E7%9A%84%E5%87%A0%E7%A7%8D%E5%88%9B%E5%BB%BAndarray%E6%96%B9%E5%BC%8F"><span class="toc-text">常用的几种创建ndarray方式</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#ndarray%E7%9A%84%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8Bdtype"><span class="toc-text">ndarray的数据类型dtype</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%E7%9A%84%E8%BD%AC%E6%8D%A2"><span class="toc-text">数据类型的转换</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%80%BB%E7%BB%93"><span class="toc-text">总结</span></a></li></ol></li></ol></div><div class="column is-9"><header class="my-4"><a href="/tags/Python,%20NumPy"><i class="tag post-item-tag">Python, NumPy</i></a></header><h1 class="mt-0 mb-1 is-family-serif" id="postTitle">Python数据分析之Numpy-ndarray及数据类型</h1><time class="has-text-grey" datetime="2019-04-12T03:39:50.000Z">2019-04-12</time><article class="mt-2 post-content"><p><img src="http://upload-images.jianshu.io/upload_images/1515206-52378f7408b16ff6.b7GJ6Crjo8S1cCY_ii1ETQHaEJ&amp;pid=Api&amp;rs=1&amp;p=0?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="NumPy"></p>
<h2 id="NumPy的ndarray">NumPy的ndarray</h2>
<p>ndarray作为NumPy中最重要的特点，你可以利用这个对数组进行数学运算。<br>
下面来看一个简单的例子</p>
<pre><code>In [1]: import numpy as np

In [2]: data  = [1, 2, 3, 4, 5]  # 创建一个普通的数组

In [3]: data2  = np.array(data) # 通过np.array函数把data转为ndarray对象
In [4]: data2
Out[4]: array([1, 2, 3, 4, 5])

In [5]: data
Out[5]: [1, 2, 3, 4, 5]  # 粗略一看发现没什么特别大的区别
</code></pre>
<p>继续往下看</p>
<pre><code>In [6]: data2 * 10
Out[6]: array([10, 20, 30, 40, 50])  # ndarray可以很方便的对数组中的每个元素进行数学计算
</code></pre>
<p>当然它也可以对多维数组进行运算</p>
<pre><code>In [19]: data = [[1, 2, 3, 4, 5],[5, 4, 3, 2, 1]]

In [20]: data2 = np.array(data)  # 发现创建ndarray的过程太过麻烦，有没有更简便点的（继续往下看）

In [21]: data2 * 10
Out[21]:
     array([[10, 20, 30, 40, 50],
       [50, 40, 30, 20, 10]])

In [22]: data2 + data2
Out[22]:
      array([[ 2,  4,  6,  8, 10],
        [10,  8,  6,  4,  2]])

In [23]:
</code></pre>
<h2 id="常用的几种创建ndarray方式">常用的几种创建ndarray方式</h2>
<pre><code>In [25]: np.zeros(5)
Out[25]: array([0., 0., 0., 0., 0.])
</code></pre>
<p>有创建全是0的数组，当然也可以创建全1的数组</p>
<pre><code>In [13]: np.ones(5)
Out[13]: array([1., 1., 1., 1., 1.])
</code></pre>
<p>如果想要创建多维数组的话，在参数中传入一个元组即可，例如</p>
<pre><code>In [26]: np.zeros((3,2))
Out[26]:
array([[0., 0.],
       [0., 0.],
       [0., 0.]])
</code></pre>
<p>同样，python中的range在NumPy中也有类似的函数</p>
<pre><code>In [3]: np.arange(10)
Out[3]: array([0, 1, 2, 3, 4, 5, 6, 7, 8, 9])
</code></pre>
<p>这里分享一个不常用但是很有趣的一个函数<strong>eye</strong>，它能够创建一个正方的N×N的矩阵，对角线为1其余为0的一个数组，它的方程式为<br>
<code>numpy.eye(N,M=None, k=0, dtype=&lt;type 'float'&gt;)</code></p>
<pre><code>In [7]: np.eye(10)
Out[7]:
array([[1., 0., 0., 0., 0., 0., 0., 0., 0., 0.],
       [0., 1., 0., 0., 0., 0., 0., 0., 0., 0.],
       [0., 0., 1., 0., 0., 0., 0., 0., 0., 0.],
       [0., 0., 0., 1., 0., 0., 0., 0., 0., 0.],
       [0., 0., 0., 0., 1., 0., 0., 0., 0., 0.],
       [0., 0., 0., 0., 0., 1., 0., 0., 0., 0.],
       [0., 0., 0., 0., 0., 0., 1., 0., 0., 0.],
       [0., 0., 0., 0., 0., 0., 0., 1., 0., 0.],
       [0., 0., 0., 0., 0., 0., 0., 0., 1., 0.],
       [0., 0., 0., 0., 0., 0., 0., 0., 0., 1.]])
</code></pre>
<p>方程式中的k决定了对角线1的起始点，如果为正整数则往右移，如果为负整数则往下移</p>
<pre><code>In [14]: np.eye(10, dtype=int, k=2)  #在这里k为2，对角线1往右移动了2个单位
Out[14]:
array([[0, 0, 1, 0, 0, 0, 0, 0, 0, 0],
       [0, 0, 0, 1, 0, 0, 0, 0, 0, 0],
       [0, 0, 0, 0, 1, 0, 0, 0, 0, 0],
       [0, 0, 0, 0, 0, 1, 0, 0, 0, 0],
       [0, 0, 0, 0, 0, 0, 1, 0, 0, 0],
       [0, 0, 0, 0, 0, 0, 0, 1, 0, 0],
       [0, 0, 0, 0, 0, 0, 0, 0, 1, 0],
       [0, 0, 0, 0, 0, 0, 0, 0, 0, 1],
       [0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
       [0, 0, 0, 0, 0, 0, 0, 0, 0, 0]])
</code></pre>
<pre><code>In [15]: np.eye(10, dtype=int, k=-2)  #如果为-2，则对角线往下移动了2个单位
Out[15]:
array([[0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
       [0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
       [1, 0, 0, 0, 0, 0, 0, 0, 0, 0],
       [0, 1, 0, 0, 0, 0, 0, 0, 0, 0],
       [0, 0, 1, 0, 0, 0, 0, 0, 0, 0],
       [0, 0, 0, 1, 0, 0, 0, 0, 0, 0],
       [0, 0, 0, 0, 1, 0, 0, 0, 0, 0],
       [0, 0, 0, 0, 0, 1, 0, 0, 0, 0],
       [0, 0, 0, 0, 0, 0, 1, 0, 0, 0],
       [0, 0, 0, 0, 0, 0, 0, 1, 0, 0]])
</code></pre>
<h3 id="ndarray的数据类型dtype">ndarray的数据类型dtype</h3>
<p>数据类型<strong>dtype</strong>是一个特殊的对象，它们会直接映射到相应的机器上来表示，这样使得我们在以后操作大数据集的读写上数据类型显得尤为重要。</p>
<p>NumPy中常见的数据类型，<em>括号中为类型代码</em></p>
<ul>
<li><strong>int8（i1）</strong>  有符号和无符号的8位整型</li>
<li><strong>int16（i2）</strong> 有符号和无符号的16位整型</li>
<li><strong>int32（i4）</strong> 有符号和无符号的32位整型</li>
<li><strong>int64（i8）</strong> 有符号和无符号的64位整型</li>
<li><strong>float16（f2）</strong> 半精度浮点数</li>
<li><strong>float32（f4或f）</strong> 标准的单精度浮点数</li>
<li><strong>float64（f8或d）</strong> 标准的双精度浮点数</li>
<li><strong>bool（?）</strong> 存储True和False的布尔值</li>
<li><strong>Object（O）</strong> python对象</li>
<li><strong>string_（S）</strong> 固定长度的字符串类型,如创建一个长度为10的字符串，应使用S10</li>
</ul>
<p>下面简单看几个例子</p>
<pre><code>In [21]: arr1 = np.array([1,2,3],dtype=np.float64)

In [22]: arr1.dtype
Out[22]: dtype('float64')
</code></pre>
<pre><code>In [21]: arr1 = np.array([1,2,3],dtype='d') #直接通过类型代码来表示数据类型更为简洁

In [22]: arr1.dtype
Out[22]: dtype('float64')
</code></pre>
<pre><code>In [23]: arr = np.array(['Bob','Jams','Wiliam','Joe'],dtype=np.string_)

In [24]: arr.dtype
Out[24]: dtype('S6')
</code></pre>
<h3 id="数据类型的转换">数据类型的转换</h3>
<p>我们可以通过ndarray的<strong>astype</strong>方法来转换其dtype</p>
<pre><code>In [25]: arr = np.array([1, 2, 3])

In [26]: arr.dtype
Out[26]: dtype('int64')

In [27]: arr2 = arr.astype(np.float64)

In [28]: arr2.dtype
Out[28]: dtype('float64')

In [29]: arr2
Out[29]: array([1., 2., 3.])
</code></pre>
<h3 id="总结">总结</h3>
<p>今天学习了NumPy中<strong>ndarray</strong>的几种常见的创建方式，可以将Python的array通过NumPy下的<strong>array</strong>函数来转换，也可以通过NumPy的zeros、empty、ones等函数来创建。了解了<strong>ndarray</strong>中比较常见的数据类型，数据类型在未来做大数据集中十分重要，它直接影响到数据的读写速度和内存大小等问题，这一点千万不能忽视。</p>
</article><section class="jump-container is-flex is-justify-content-space-between my-6"><!-- em is empty placeholder--><a class="button is-default" href="/data-analyst/Python%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90%E4%B9%8BNumpy-%E5%9F%BA%E6%9C%AC%E7%9A%84%E7%B4%A2%E5%BC%95%E4%B8%8E%E5%88%87%E7%89%87/" title="Python数据分析之Numpy-基本的索引与切片"><i class="iconfont icon-prev mr-2 has-text-grey"></i><span class="has-text-weight-semibold">上一页: Python数据分析之Numpy-基本的索引与切片</span></a><a class="button is-default" href="/data-analyst/Python%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90%E4%B9%8BNumpy-%E5%85%A5%E9%97%A8%E5%AE%89%E8%A3%85%E4%BB%8B%E7%BB%8D/" title="Python数据分析之Numpy---入门安装介绍"><span class="has-text-weight-semibold">下一页: Python数据分析之Numpy---入门安装介绍</span><i class="iconfont icon-next ml-2 has-text-grey"></i></a></section><article class="mt-6 comment-container"><script async repo="fuer4869/fuer4869.github.io" src="https://utteranc.es/client.js" issue-term="pathname" theme="preferred-color-scheme"></script></article></div></div></main></main><footer class="is-flex is-flex-direction-column is-align-items-center is-flex-shrink-0 is-family-serif"><section class="sns-container"><a title="twitter" target="_blank" rel="noopener nofollow" href="//twitter.com//"><i class="iconfont icon-twitter"></i></a><!-- Github--><a title="github" target="_blank" rel="noopener nofollow" href="//github.com/fuer4869"><i class="iconfont icon-github"></i></a><!-- Ins--><a title="instagram" target="_blank" rel="noopener nofollow" href="//www.instagram.com//"><i class="iconfont icon-ins"></i></a><!-- RSS--><!-- 知乎--><!-- 领英--><!-- 脸书--><a title="facebook" target="_blank" rel="noopener nofollow" href="//www.facebook.com//"><i class="iconfont icon-tian7_facebook"></i></a></section><p><span>Copyright ©</span><span> loannes 2022</span></p><div class="is-flex is-justify-content-center is-flex-wrap-wrap"><p>Powered by Hexo &verbar;&nbsp;</p><p class="is-flex is-justify-content-center"><a title="Hexo theme author" target="_blank" rel="noopener" href="//github.com/haojen">Theme by Haojen&nbsp;</a></p><div style="margin-top: 2px"><a class="github-button" title="github-button" target="_blank" rel="noopener" href="https://github.com/haojen/hexo-theme-Claudia" data-color-scheme="no-preference: light; light: light; dark: dark;" data-show-count="true"></a></div></div></footer><script async defer src="https://buttons.github.io/buttons.js"></script><script src="/js/post.js"></script></body></html>