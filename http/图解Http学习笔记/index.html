<!DOCTYPE html><html class="appearance-auto" lang="zh-CN"><head><meta charset="UTF-8"><title>Http学习笔记</title><meta name="description"><meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no, initial-scale=1"><link rel="icon" href="/images/favicon.png"><link rel="stylesheet" href="/style/common/bulma.css"><link rel="stylesheet" href="/style/base.css"><link rel="stylesheet" href="/style/common/helper.css"><script src="/js/common.js"></script><link rel="stylesheet" href="/style/post.css"><link rel="stylesheet" href="/style/themes/highlight-theme-light.css"><script src="/js/highlight.pack.js"></script><meta name="generator" content="Hexo 5.3.0"></head><body class="is-flex is-flex-direction-column"><header class="is-flex header-widget is-flex-shrink-0 is-align-items-center is-justify-content-space-between is-hidden-mobile"><section class="is-hidden-mobile is-flex-shrink-0"><h2><a href="/">loannes's blog</a></h2></section><h3 class="is-hidden-mobile is-family-serif is-full-height is-flex is-align-items-center is-flex-shrink-0"><div class="is-full-height" id="postTopic"><p class="is-full-height is-flex-shrink-0 is-flex is-align-items-center is-justify-content-center">Http学习笔记</p><p class="is-full-height is-flex-shrink-0 is-flex is-align-items-center is-justify-content-center">点击返回顶部</p></div></h3><aside class="is-flex-shrink-0"><h3 class="is-inline-block"><a href="/">首页</a></h3><h3 class="is-inline-block"><a href="/about">关于</a></h3><h3 class="is-inline-block"><a href="/archives">归档</a></h3></aside></header><header class="is-flex header-widget is-flex-shrink-0 is-align-items-center is-justify-content-center is-hidden-tablet"><h3 class="is-inline-block"><a href="/">首页</a></h3><h3 class="is-inline-block"><a href="/about">关于</a></h3><h3 class="is-inline-block"><a href="/archives">归档</a></h3></header><main><main class="container is-max-widescreen content section post-page pt-4 px-4"><div class="columns is-flex-desktop is-justify-content-center is-flex-direction-row-reverse"><div class="column is-3 is-hidden-mobile"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link"><span class="toc-text">计算机网络体系结构</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%B7%E6%9C%89%E4%BA%94%E5%B1%82%E5%8D%8F%E8%AE%AE%E7%9A%84%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84"><span class="toc-text">具有五层协议的体系结构</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#TCP-IP-%E9%80%9A%E4%BF%A1%E4%BC%A0%E8%BE%93%E6%B5%81"><span class="toc-text">TCP&#x2F;IP 通信传输流</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#IP%E3%80%81TCP%E5%92%8CDNS"><span class="toc-text">IP、TCP和DNS</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%B4%9F%E8%B4%A3%E4%BC%A0%E8%BE%93%E7%9A%84IP%E5%8D%8F%E8%AE%AE"><span class="toc-text">负责传输的IP协议</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ARP%E5%8D%8F%E8%AE%AE"><span class="toc-text">ARP协议</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#TCP%E5%8D%8F%E8%AE%AE"><span class="toc-text">TCP协议</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#DNS%E5%8D%8F%E8%AE%AE"><span class="toc-text">DNS协议</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link"><span class="toc-text">HTTP协议</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%80%9A%E8%BF%87%E8%AF%B7%E6%B1%82%E5%92%8C%E5%93%8D%E5%BA%94%E4%BA%A4%E6%8D%A2%E8%BE%BE%E6%88%90%E9%80%9A%E4%BF%A1"><span class="toc-text">通过请求和响应交换达成通信</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#HTTP%E6%98%AF%E4%B8%8D%E4%BF%9D%E5%AD%98%E7%8A%B6%E6%80%81%E7%9A%84%E5%8D%8F%E8%AE%AE"><span class="toc-text">HTTP是不保存状态的协议</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#HTTP%E6%96%B9%E6%B3%95%E6%9C%89%E5%93%AA%E4%BA%9B"><span class="toc-text">HTTP方法有哪些</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%8C%81%E4%B9%85%E8%BF%9E%E6%8E%A5%EF%BC%88keep-alive%EF%BC%89"><span class="toc-text">持久连接（keep-alive）</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8Cookie%E7%8A%B6%E6%80%81%E7%AE%A1%E7%90%86"><span class="toc-text">使用Cookie状态管理</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link"><span class="toc-text">返回结果的HTTP状态码</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%8A%B6%E6%80%81%E7%A0%81%E7%B1%BB%E5%88%AB"><span class="toc-text">状态码类别</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2XX-%E6%88%90%E5%8A%9F"><span class="toc-text">2XX 成功</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3XX-%E9%87%8D%E5%AE%9A%E5%90%91"><span class="toc-text">3XX 重定向</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4XX-%E5%AE%A2%E6%88%B7%E7%AB%AF%E9%94%99%E8%AF%AF"><span class="toc-text">4XX 客户端错误</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5XX-%E6%9C%8D%E5%8A%A1%E5%99%A8%E9%94%99%E8%AF%AF"><span class="toc-text">5XX 服务器错误</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link"><span class="toc-text">HTTP首部</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#HTTP%E9%A6%96%E9%83%A8%E5%AD%97%E6%AE%B5"><span class="toc-text">## HTTP首部字段</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#4%E7%A7%8DHTTP%E9%A6%96%E9%83%A8%E5%AD%97%E6%AE%B5%E7%B1%BB%E5%9E%8B"><span class="toc-text">4种HTTP首部字段类型</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%80%9A%E7%94%A8%E9%A6%96%E9%83%A8%E5%AD%97%E6%AE%B5"><span class="toc-text">通用首部字段</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AF%B7%E6%B1%82%E9%A6%96%E9%83%A8%E5%AD%97%E6%AE%B5"><span class="toc-text">请求首部字段</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%93%8D%E5%BA%94%E9%A6%96%E9%83%A8%E5%AD%97%E6%AE%B5"><span class="toc-text">响应首部字段</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%9E%E4%BD%93%E9%A6%96%E9%83%A8%E5%AD%97%E6%AE%B5"><span class="toc-text">实体首部字段</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%A1%AE%E4%BF%9Dweb%E5%AE%89%E5%85%A8%E7%9A%84HTTPS"><span class="toc-text">确保web安全的HTTPS</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#HTTP%E7%9A%84%E7%BC%BA%E7%82%B9"><span class="toc-text">HTTP的缺点</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%80%9A%E4%BF%A1%E5%8A%A0%E5%AF%86%E6%96%B9%E5%BC%8F"><span class="toc-text">通信加密方式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#HTTPS%E5%AE%89%E5%85%A8%E9%80%9A%E4%BF%A1%E6%9C%BA%E5%88%B6"><span class="toc-text">HTTPS安全通信机制</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#HTTPS%E9%80%9F%E5%BA%A6%E6%85%A2"><span class="toc-text">HTTPS速度慢</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%94%A8%E6%88%B7%E8%BA%AB%E4%BB%BD%E8%AE%A4%E8%AF%81"><span class="toc-text">用户身份认证</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#HTTP%E8%AE%A4%E8%AF%81%E6%96%B9%E5%BC%8F"><span class="toc-text">HTTP认证方式</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#BASIC%E8%AE%A4%E8%AF%81%E6%AD%A5%E9%AA%A4"><span class="toc-text">BASIC认证步骤</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#BASIC%E8%AE%A4%E8%AF%81%E7%BC%BA%E7%82%B9"><span class="toc-text">BASIC认证缺点</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#DIGEST%E8%AE%A4%E8%AF%81%E6%AD%A5%E9%AA%A4"><span class="toc-text">DIGEST认证步骤</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#SSL%E5%AE%A2%E6%88%B7%E7%AB%AF%E8%AE%A4%E8%AF%81%E6%AD%A5%E9%AA%A4"><span class="toc-text">SSL客户端认证步骤</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#SSL%E5%AE%A2%E6%88%B7%E7%AB%AF%E5%8F%8C%E5%9B%A0%E7%B4%A0%E8%AE%A4%E8%AF%81"><span class="toc-text">SSL客户端双因素认证</span></a></li></ol></li></ol></li></ol></li></ol></li></ol></div><div class="column is-9"><header class="my-4"><a href="/tags/%E7%AC%94%E8%AE%B0"><i class="tag post-item-tag">笔记</i></a><a href="/tags/HTTP"><i class="tag post-item-tag">HTTP</i></a></header><h1 class="mt-0 mb-1 is-family-serif" id="postTitle">Http学习笔记</h1><time class="has-text-grey" datetime="2020-05-04T10:51:33.000Z">2020-05-04</time><article class="mt-2 post-content"><blockquote>
<p>根据上野宣的《图解HTTP》整理的个人学习笔记，记录重点与配图</p>
</blockquote>
<h1>计算机网络体系结构</h1>
<h2 id="具有五层协议的体系结构">具有五层协议的体系结构</h2>
<p>一般提到计算机网络体系结构，都指的是五层协议。七层协议虽然足够完整，但是过于复杂而且不实用。</p>
<p><img src="https://raw.githubusercontent.com/fuer4869/imgbed/master/20210508145121.png" alt=""></p>
<ol>
<li>
<p>应用层</p>
<p>应用层决定了向用户提供应用服务时通信的活动。</p>
<p>TCP/IP协议族内预存了各类通用的应用服务。比如FTP(File Transfer Protocol, 文件传输协议) 和 DNS(Domain Name System, 域名系统)服务就是其中两类。</p>
</li>
<li>
<p>传输层</p>
<p>传输层对上层应用层，提供处于网络连接中的两台计算机之间的数据传输。</p>
<p>在传输层有两个性质不同的协议，TCP(Transmission Control Protocol, 传输控制协议) 和 UDP (User Data Protocol,  用户数据报协议)。</p>
</li>
<li>
<p>网络层</p>
<p>网络层用来处理在网络上流动的数据包。数据包是网络传输中最小的数据单位。该层规定了计算机通过哪条路径到达对方计算机，并将数据报传送给对方。</p>
<p>与对方计算机之间通过多台计算机或网络设备进行传输时，网络层所起的作用就是在众多的选项中选择一条传输路线。</p>
</li>
<li>
<p>链路层（又名数据链路层）</p>
<p>用来处理连接网络的硬件部分。包括控制操作系统、“硬件的设备驱动、NIC（Network Interface Card，网络适配器，即网卡），及光纤等物理可见部分（还包括连接器等一切传输媒介）。硬件上的范畴均在链路层的作用范围之内。”</p>
</li>
<li>
<p>物理层</p>
<p>物理层考虑的是如何在连接各种计算机的传输媒体上传输数据比特流，而不是指具体的传输媒体。</p>
<p>因为计算机之间的传输媒体有很多种，有wifi，蓝牙，电话网络，ADSL等等，物理层做的就是如何在这些传输媒体上传输数据。</p>
</li>
</ol>
<h2 id="TCP-IP-通信传输流">TCP/IP 通信传输流</h2>
<p><img src="https://raw.githubusercontent.com/fuer4869/imgbed/master/20210508143320.png" alt=""></p>
<p>利用TCP/IP协议族进行网络通信时，会以分层顺序与对方进行通信。发送端会从应用层往下走，接收端会从链路层往上走。</p>
<p><img src="https://raw.githubusercontent.com/fuer4869/imgbed/master/20210508145919.png" alt=""></p>
<h2 id="IP、TCP和DNS">IP、TCP和DNS</h2>
<h3 id="负责传输的IP协议">负责传输的IP协议</h3>
<p>IP协议位于网络层，几乎所有使用网络的系统都会用到IP协议。IP指的是网际协议，与IP地址完全是两码事。</p>
<p>IP协议的作用是把数据传送给对方，而要保证确实的传送给了对方，需要两个条件：IP地址和MAC地址（Media Access Control Address）</p>
<p>IP地址： 节点被分配到的地址</p>
<p>MAC地址： 网卡所属的固定地址</p>
<p>IP地址可以和MAC地址配对，IP地址可以变换，但是MAC地址基本上不会更改。</p>
<p>TCP和IP统称为TCP/IP协议族，其中IP占据了一半，剩下的就是TCP。</p>
<h3 id="ARP协议">ARP协议</h3>
<p>ARP协议是一种用以解析IP地址的协议，最终将得到IP地址配对的MAC地址。</p>
<p>因为IP之间通信需要用到MAC地址，IP地址与MAC地址又是配对的。通常情况下通信的双方会经过多台计算机和网络设备中转才能连接到对方，那如何找到下一个中转设备，就需要通过ARP协议来解析IP地址从而获得MAC地址。</p>
<h3 id="TCP协议">TCP协议</h3>
<p>TCP协议为了准确可靠地将数据传输给对方，采用了三次握手（three-way handshaking）策略。</p>
<p><img src="https://raw.githubusercontent.com/fuer4869/imgbed/master/20210508163646.png" alt=""></p>
<p>发送端首先发送一个带有SYN标志的数据包给对方，接收端收到后回传一个带有SYN/ACK标志的数据包以确认信息。最后发送端再回传一个带有ACK标志的数据报，代表握手结束。</p>
<h3 id="DNS协议">DNS协议</h3>
<p>DNS协议提供通过域名查找IP地址，也提供逆向通过域名查找IP地址的服务。</p>
<h1>HTTP协议</h1>
<h2 id="通过请求和响应交换达成通信">通过请求和响应交换达成通信</h2>
<p>HTTP协议规定，请求必须从客户端发出，最后服务端响应该请求并返回。</p>
<h2 id="HTTP是不保存状态的协议">HTTP是不保存状态的协议</h2>
<p>HTTP协议自身不对请求和响应之间的状态进行保存，也就是说HTTP协议对于发送过的请求和响应不做持久化处理。</p>
<p>起初这么设计纯粹是为了更快的处理大量事务，确保协议的可伸缩性。</p>
<h2 id="HTTP方法有哪些">HTTP方法有哪些</h2>
<ul>
<li>GET: 获取资源</li>
<li>POST: 传输实体主体</li>
<li>PUT: 传输文件</li>
<li>HEAD: 获得报文首部</li>
<li>DELETE: 删除文件</li>
<li>OPTIONS: 询问支持的方法</li>
<li>TRACE: 追踪路径</li>
<li>CONNECT: 要求用隧道协议连接代理</li>
</ul>
<h2 id="持久连接（keep-alive）">持久连接（keep-alive）</h2>
<p>持久连接的特点是只要任意一端没有提出断开连接，则保持TCP连接状态。</p>
<p>在HTTP/1.1中，所有的连接默认都是持久连接。</p>
<h2 id="使用Cookie状态管理">使用Cookie状态管理</h2>
<p>Cookie会根据从服务端发送的响应报文内Set-Cookie的首部字段信息来通知客户端保存Cookie。当下次客户端向服务器发送请求时，客户端会自动在请求报文中加入Cookie。</p>
<p>服务器在接收到Cookie后，会从服务器记录中对比是哪个客户端发送过来的请求，最后得到之前的状态并返回。</p>
<h1>返回结果的HTTP状态码</h1>
<h2 id="状态码类别">状态码类别</h2>
<p><img src="https://raw.githubusercontent.com/fuer4869/imgbed/master/20210510183508.png" alt=""></p>
<p>只要遵守状态码类别的定义，即使改变RFC2616中定义的状态码，或服务端自行创建状态码都没问题。</p>
<h2 id="2XX-成功">2XX 成功</h2>
<p>2XX的响应结果就代表被正常处理了。</p>
<ul>
<li>200 OK  请求处理正常，返回报文。</li>
<li>204 No Content  请求处理成功，但无资源返回。</li>
<li>206 Partial Content  表示客户端进行了范围请求，获得了部分数据。</li>
</ul>
<h2 id="3XX-重定向">3XX 重定向</h2>
<p>3XX响应结果表明浏览器需要执行某些特殊的处理才能正常处理请求。</p>
<ul>
<li>301 Moved Permanently  永久重定向。表示请求资源已经被分配了新的URI, 以后应使用资源现在所指的URI。</li>
<li>302 Found 临时重定向。与301相似，不同的是只需要本次使用新的URI来访问。</li>
<li>303 See Other  请求的资源存在着另一个URI，应使用GET方法定向获取请求的资源。</li>
<li>304 Not Modified 表示服务器允许请求访问资源，但是并未满足条件请求。</li>
</ul>
<h2 id="4XX-客户端错误">4XX 客户端错误</h2>
<p>4XX的响应结果表示客户端发生的错误。</p>
<ul>
<li>
<p>400 Bad Request 表示请求报文中存在语法错误。</p>
</li>
<li>
<p>401 Unauthorized  表示该请求需要通过BASIC、DIGEST认证</p>
<p><img src="https://raw.githubusercontent.com/fuer4869/imgbed/master/20210511001058.png" alt=""></p>
</li>
<li>
<p>403 Forbidden 表示对请求资源的访问被服务器拒绝了</p>
</li>
<li>
<p>404 Not Found 表示未在服务器上找到该资源</p>
</li>
</ul>
<h2 id="5XX-服务器错误">5XX 服务器错误</h2>
<p>5XX的响应结果表示服务器发生了错误。</p>
<ul>
<li>500 Internal Server Error  一般指的是服务器端在请求时发生了错误。</li>
<li>503 Service Unavaliable 表示服务器暂时处于超负载或者在停机维护</li>
</ul>
<h1>HTTP首部</h1>
<h2 id="HTTP首部字段">## HTTP首部字段</h2>
<h3 id="4种HTTP首部字段类型">4种HTTP首部字段类型</h3>
<ul>
<li><strong>通用首部字段</strong>  请求报文和响应报文都会使用的首部</li>
<li><strong>请求首部字段</strong>  从客户端向服务端发送请求报文时使用的首部字段</li>
<li><strong>响应首部字段</strong>  服务端向客户端返回响应报文时使用的首部字段</li>
<li><strong>实体首部字段</strong>  针对请求报文和响应报文的实体部分使用的首部字段</li>
</ul>
<h3 id="通用首部字段">通用首部字段</h3>
<table>
<thead>
<tr>
<th>首部字段名</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>Cache-Control</td>
<td>控制缓存的行为</td>
</tr>
<tr>
<td>Connection</td>
<td>逐跳首部、连接的管理</td>
</tr>
<tr>
<td>Date</td>
<td>创建报文的日期和时间</td>
</tr>
<tr>
<td>Pragma</td>
<td>报文指令</td>
</tr>
<tr>
<td>Trailer</td>
<td>报文末端首部一览</td>
</tr>
<tr>
<td>Transfer-Encoding</td>
<td>报文主题的传输编码方式</td>
</tr>
<tr>
<td>Upgrade</td>
<td>升级为其他协议</td>
</tr>
<tr>
<td>Via</td>
<td>代理服务器的相关信息</td>
</tr>
<tr>
<td>Warnning</td>
<td>错误通知</td>
</tr>
</tbody>
</table>
<h3 id="请求首部字段">请求首部字段</h3>
<table>
<thead>
<tr>
<th>首部字段名</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>Accept</td>
<td>用户代理可处理的媒体类型  <em>/</em><code>表示任何类型，</code>type/*<code>表示该类型下的所有子类型，</code>type/sub-type</td>
</tr>
<tr>
<td>Accept-Charset</td>
<td>客户端可接受的字符编码类型</td>
</tr>
<tr>
<td>Accept-Encoding</td>
<td>数据传输的压缩格式（gzip,Compress）</td>
</tr>
<tr>
<td>Accept-Language</td>
<td>浏览器支持的语言类型，中文有多种字符集，比如big5，gb2312，gbk等等</td>
</tr>
<tr>
<td>Authorization</td>
<td>当客户端接收到来自WEB服务器的 WWW-Authenticate 响应时，用该头部来回应自己的身份验证信息给WEB服务器。</td>
</tr>
<tr>
<td>Expect</td>
<td>用于支出客户端要求的特殊服务器行为</td>
</tr>
<tr>
<td>From</td>
<td>用户的电子邮箱地址</td>
</tr>
<tr>
<td>Host</td>
<td>请求资源所在服务器</td>
</tr>
<tr>
<td>If-Match</td>
<td>如果对象的 ETag 没有改变，其实也就意味著对象没有改变，才执行请求的动作。<a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Headers/If-Match">If-Match</a></td>
</tr>
<tr>
<td>If-None-Match</td>
<td>如果对象的 ETag 改变了，其实也就意味著对象也改变了，才执行请求的动作。<a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Headers/If-None-Match">If-None-Match</a></td>
</tr>
<tr>
<td>If-Modified-Since</td>
<td>服务器只在所请求的资源在给定的日期时间之后<strong>对内容进行过修改</strong>的情况下才会将资源返回</td>
</tr>
<tr>
<td>If-Range</td>
<td>资源未更新时发送实体Byte的范围请求（常用于断点续传）</td>
</tr>
<tr>
<td>If-Unmodified-Since</td>
<td>服务器只在所请求的资源在给定的日期时间之后<strong>没有对内容进行过修改</strong>的情况下才会将资源返回</td>
</tr>
<tr>
<td>Max-Forwards</td>
<td>最大传输逐跳数</td>
</tr>
<tr>
<td>Proxy-Authorization</td>
<td>代理服务器需要客户端的认证信息</td>
</tr>
<tr>
<td>Range</td>
<td>实体的字节范围要求</td>
</tr>
<tr>
<td>Refer</td>
<td>请求中URI的原始获取方</td>
</tr>
<tr>
<td>TE</td>
<td>传输编码的优先级</td>
</tr>
<tr>
<td>User-Agent</td>
<td>HTTP客户端程序的信息</td>
</tr>
</tbody>
</table>
<h3 id="响应首部字段">响应首部字段</h3>
<table>
<thead>
<tr>
<th>首部字段名</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>Accept-Ranges</td>
<td>是否接受字节范围请求</td>
</tr>
<tr>
<td>Age</td>
<td>资源创建后经历的时间</td>
</tr>
<tr>
<td>ETag</td>
<td>资源的特定版本标识符</td>
</tr>
<tr>
<td>Location</td>
<td>令客户端重定向到指定URI</td>
</tr>
<tr>
<td>Proxy-Authorization</td>
<td>代理服务器需要客户端的认证信息</td>
</tr>
<tr>
<td>Retry-After</td>
<td>表示用户需要等待多少时间之后才能继续请求</td>
</tr>
<tr>
<td>Server</td>
<td>HTTP服务器的相关信息</td>
</tr>
<tr>
<td>Vary</td>
<td>代理服务器的缓存管理信息</td>
</tr>
<tr>
<td>WWW-Authorization</td>
<td>定义了以何种方式去获取对资源的连接</td>
</tr>
</tbody>
</table>
<h3 id="实体首部字段">实体首部字段</h3>
<table>
<thead>
<tr>
<th>首部字段名</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>Allow</td>
<td>资源可支持的HTTP方法</td>
</tr>
<tr>
<td>Content-Encoding</td>
<td>实体主体使用的编码方式</td>
</tr>
<tr>
<td>Content-Language</td>
<td>实体主体的自然语言</td>
</tr>
<tr>
<td>Content-Length</td>
<td>实体的主体大小</td>
</tr>
<tr>
<td>Content-Location</td>
<td>替代对应资源的URI</td>
</tr>
<tr>
<td>Content-MD5</td>
<td>用于检查报文主体是否完整</td>
</tr>
<tr>
<td>Content-Range</td>
<td>表示发送的内容在整个实体中的范围</td>
</tr>
<tr>
<td>Content-Type</td>
<td>主体媒体类型</td>
</tr>
<tr>
<td>Expires</td>
<td>主体过期时间</td>
</tr>
<tr>
<td>Last-Modified</td>
<td>资源最后修改时间</td>
</tr>
<tr>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<h2 id="确保web安全的HTTPS">确保web安全的HTTPS</h2>
<h3 id="HTTP的缺点">HTTP的缺点</h3>
<p>HTTP主要有以下不足：</p>
<ul>
<li>通信使用明文，内容可能会被窃听</li>
<li>不验证通信方的身份，可能遭遇伪装</li>
<li>无法证明报文的完整性，所以有可能已遭篡改</li>
</ul>
<h3 id="通信加密方式">通信加密方式</h3>
<ul>
<li>SSL 安全套接层</li>
<li>TLS 安全传输协议</li>
<li>内容加密</li>
</ul>
<h3 id="HTTPS安全通信机制">HTTPS安全通信机制</h3>
<p>HTTPS就是套了SSL证书壳的HTTP</p>
<ol>
<li>客户端通过发送Client Hello报文开始SSL通信。</li>
<li>服务器可进行SSL通信时，会以Server Hello作为应答。</li>
<li>之后服务器发送Certificate报文。报文中包含公钥证书。</li>
<li>最后服务器发送Server Hello Done 报文通知客户端，最初阶段的SSL握手协商部分结束。</li>
<li>SSL第一次握手结束后，客户端以Client Key Exchange报文作为回应。报文中还包含加密过的随机密码串（Pre master secret）</li>
<li>接着客户端发送Change Clip Spec报文，提示服务器接下来的报文会以Pre-master secret加密</li>
<li>客户端发送Finish报文，该报文包含全部报文的整体校验值。这次报文能否成功取决于服务器能否正确解密该报文。</li>
<li>服务器同样发送Change Clip Spec报文</li>
<li>服务器同样发送Finish报文</li>
<li>服务器和客户端Finish报文交换完毕后，SSL连接就算建立完成。接下来开始进行应用层通信协议。</li>
<li>应用层协议通信，发送HTTP响应</li>
<li>最后由客户端断开连接，断开连接时发送close_notify报文。</li>
</ol>
<p><img src="https://raw.githubusercontent.com/fuer4869/imgbed/master/20210601131402.png" alt=""></p>
<h3 id="HTTPS速度慢">HTTPS速度慢</h3>
<p>HTTPS的速度大概比HTTP慢2到100倍。看过上面的通信机制就知道HTTPS需要加上多次加密和解密运算操作。结果上来讲HTTPS比HTTP会更多的消耗客户端和服务器的硬件资源。</p>
<h2 id="用户身份认证">用户身份认证</h2>
<h3 id="HTTP认证方式">HTTP认证方式</h3>
<ul>
<li>BASIC认证</li>
<li>DIGEST认证</li>
<li>SSL客户端认证</li>
<li>FormBase认证</li>
</ul>
<h4 id="BASIC认证步骤">BASIC认证步骤</h4>
<ol>
<li>当请求资源需要BASIC认证时，服务器会随状态码401 Authorization Required,返回带WWW-Authenticate首部字段的响应。</li>
<li>接收到状态码401的客户端为了通过BASIC认证，需要将用户ID以及密码发送给服务器。</li>
<li>接收到包含首部字段Authorization请求的服务器，会对认证信息的正确性进行验证。如验证通过，则返回一条包含Request-URI资源的响应。</li>
</ol>
<h4 id="BASIC认证缺点">BASIC认证缺点</h4>
<ol>
<li>BASIC认证采用base64编码，但是这不是加密方式，可以很轻松的对其解码。</li>
<li>一般浏览器无法进行认证注销操作</li>
</ol>
<h4 id="DIGEST认证步骤">DIGEST认证步骤</h4>
<p><img src="https://raw.githubusercontent.com/fuer4869/imgbed/master/20210601145110.png" alt=""></p>
<ol>
<li>
<p>请求需认证的资源时，服务器会随着状态码401 Authorization Required，返回带WWW-Authenticate首部字段的响应。首部字段WWW-Authenticate内必须包含realm 和 nonce这两个字段的信息。</p>
<p>nonce是一种每次随返回的401响应生成的任意随机字符串。</p>
</li>
<li>
<p>接收到401状态码的客户端，返回的响应中包含DIGEST认证必须的首部字段Authorization信息。</p>
<p>首部字段内必须包含username、realm、nonce、url和response的字段信息。</p>
</li>
<li>
<p>接收到包含首部字段Authorization请求的服务器，会确认认证信息的正确性。认证通过后会返回包含Request-URI资源的响应。</p>
<p>并且这时会在首部字段Authentication-Info中写入一些认证成功的信息。</p>
</li>
</ol>
<h4 id="SSL客户端认证步骤">SSL客户端认证步骤</h4>
<ol>
<li>接收到需要认证资源的请求，服务器会发送Certificate Request报文，要求客户端提供客户端证书。</li>
<li>用户选择将发送的客户端证书后，客户端将客户端证书信息以Client Certificate报文方式发送给服务器。</li>
<li>服务器验证客户端证书，通过后方可领取证书内客户端的公钥，然后开始HTTPS通信。</li>
</ol>
<h5 id="SSL客户端双因素认证">SSL客户端双因素认证</h5>
<p>SSL认证一般会和基于表单认证结合一起使用，SSL认证负责认证客户端计算机，而表单认证用来确定是否是用户本人的行为。</p>
</article><section class="jump-container is-flex is-justify-content-space-between my-6"><!-- em is empty placeholder--><a class="button is-default" href="/python/Python%E9%9D%A2%E8%AF%95%E9%A2%98%E5%9B%9B/" title="Python面试题四"><i class="iconfont icon-prev mr-2 has-text-grey"></i><span class="has-text-weight-semibold">上一页: Python面试题四</span></a><a class="button is-default" href="/python/Python%E9%9D%A2%E8%AF%95%E9%A2%98-%E4%BA%8C/" title="Python面试题(二)"><span class="has-text-weight-semibold">下一页: Python面试题(二)</span><i class="iconfont icon-next ml-2 has-text-grey"></i></a></section><article class="mt-6 comment-container"><script async repo="fuer4869/fuer4869.github.io" src="https://utteranc.es/client.js" issue-term="pathname" theme="preferred-color-scheme"></script></article></div></div></main></main><footer class="is-flex is-flex-direction-column is-align-items-center is-flex-shrink-0 is-family-serif"><section class="sns-container"><a title="twitter" target="_blank" rel="noopener nofollow" href="//twitter.com//"><i class="iconfont icon-twitter"></i></a><!-- Github--><a title="github" target="_blank" rel="noopener nofollow" href="//github.com/fuer4869"><i class="iconfont icon-github"></i></a><!-- Ins--><a title="instagram" target="_blank" rel="noopener nofollow" href="//www.instagram.com//"><i class="iconfont icon-ins"></i></a><!-- RSS--><!-- 知乎--><!-- 领英--><!-- 脸书--><a title="facebook" target="_blank" rel="noopener nofollow" href="//www.facebook.com//"><i class="iconfont icon-tian7_facebook"></i></a></section><p><span>Copyright ©</span><span> loannes 2022</span></p><div class="is-flex is-justify-content-center is-flex-wrap-wrap"><p>Powered by Hexo &verbar;&nbsp;</p><p class="is-flex is-justify-content-center"><a title="Hexo theme author" target="_blank" rel="noopener" href="//github.com/haojen">Theme by Haojen&nbsp;</a></p><div style="margin-top: 2px"><a class="github-button" title="github-button" target="_blank" rel="noopener" href="https://github.com/haojen/hexo-theme-Claudia" data-color-scheme="no-preference: light; light: light; dark: dark;" data-show-count="true"></a></div></div></footer><script async defer src="https://buttons.github.io/buttons.js"></script><script src="/js/post.js"></script></body></html>